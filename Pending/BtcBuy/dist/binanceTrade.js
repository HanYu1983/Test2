// Generated by LiveScript 1.6.0
(function(){
  var dispatchKeyboardEvent, delay;
  console.log("trade");
  dispatchKeyboardEvent = function(target, initKeyboradEvent_args){
    var e;
    e = document.createEvent("KeyboardEvents");
    e.initKeyboardEvent.apply(e, Array.prototype.slice.call(arguments, 1));
    return target.dispatchEvent(e);
  };
  delay = function(t){
    return new Promise(function(res, rej){
      return setTimeout(res, t);
    });
  };
  async function main(){
    var search, e, nowP, input, buyB;
    (await delay(5000));
    search = $('input[placeholder="查詢 …"]');
    console.log(search);
    search.focus();
    search.val("XRP").trigger("keypress");
    e = new KeyboardEvent("keypress", {
      bubbles: true,
      cancelable: false,
      char: "Q",
      key: "q",
      shiftKey: true,
      keyCode: 81
    });
    search[0].dispatchEvent(e);
    dispatchMouseEvent(search[0], 'click', true, true);
    nowP = $($('div:contains("市價")')[10]).find("li")[1];
    $(nowP).click();
    console.log(nowP);
    (await delay(3000));
    input = $('#FormRow-BUY-quantity');
    input.focus();
    input.val("1").trigger("change");
    (await delay(50));
    return buyB = $($('div:contains("買入")')[15]).find("button").first();
  }
  main();
  chrome.runtime.onMessage.addListener(function(message, sender, sendResponse){
    return sendResponse({
      content: "來自內容腳本的回覆"
    });
  });
}).call(this);
