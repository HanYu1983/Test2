// Generated by LiveScript 1.6.0
(function(){
  chrome.runtime.onInstalled.addListener(function(){
    console.log('nothing to do');
    /*
    // 確定background也可以使用websocket
    ws = new WebSocket 'wss://stream.binance.com:9443/ws/xrpbtc@trade'
        ..onopen = (evt) ->
            console.log evt
    
        ..onclose = (evt) ->
            console.log evt
    
        ..onmessage = ({data}) ->
            {p} = JSON.parse(data)
            console.log p
        
        ..onerror = (evt) ->
            console.log evt
    */
    /*
    chrome.windows.getCurrent (w)->
        chrome.tabs.create {url: 'https://www.binance.com/tw/trade/XRP_BTC', windowId: w.id}, (t)->
    */
    return setInterval(function(){
      return chrome.tabs.query({
        url: 'https://www.binance.com/tw/trade/XRP_BTC',
        currentWindow: true
      }, function(t){
        console.log("send Message");
        return chrome.tabs.sendMessage(t[0].id, {
          message: 'buy'
        }, function(res){
          return console.log(res);
        });
      });
    }, 5000);
  });
}).call(this);
